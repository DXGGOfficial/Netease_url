# ç½‘æ˜“äº‘éŸ³ä¹å·¥å…·ç®± - ä½¿ç”¨æ–‡æ¡£

## ğŸ“– é¡¹ç›®ç®€ä»‹

ç½‘æ˜“äº‘éŸ³ä¹å·¥å…·ç®±æ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„ç½‘æ˜“äº‘éŸ³ä¹è§£æå·¥å…·ï¼Œæ”¯æŒæ­Œæ›²æœç´¢ã€å•æ›²è§£æã€æ­Œå•è§£æã€ä¸“è¾‘è§£æå’ŒéŸ³ä¹ä¸‹è½½ç­‰åŠŸèƒ½ã€‚é¡¹ç›®æä¾›äº†å‹å¥½çš„Webç•Œé¢å’Œå®Œæ•´çš„APIæ¥å£ï¼Œæ”¯æŒå¤šç§éŸ³è´¨é€‰æ‹©ï¼ŒåŒ…æ‹¬æ— æŸã€Hi-Resç­‰é«˜å“è´¨éŸ³é¢‘æ ¼å¼ã€‚

## âœ¨ åŠŸèƒ½ç‰¹æ€§

### ğŸµ æ ¸å¿ƒåŠŸèƒ½
- **æ­Œæ›²æœç´¢**ï¼šæ”¯æŒå…³é”®è¯æœç´¢ç½‘æ˜“äº‘éŸ³ä¹åº“ä¸­çš„æ­Œæ›²
- **å•æ›²è§£æ**ï¼šè§£æå•é¦–æ­Œæ›²çš„è¯¦ç»†ä¿¡æ¯å’Œä¸‹è½½é“¾æ¥
- **æ­Œå•è§£æ**ï¼šæ‰¹é‡è§£ææ­Œå•ä¸­çš„æ‰€æœ‰æ­Œæ›²
- **ä¸“è¾‘è§£æ**ï¼šæ‰¹é‡è§£æä¸“è¾‘ä¸­çš„æ‰€æœ‰æ­Œæ›²
- **éŸ³ä¹ä¸‹è½½**ï¼šæ”¯æŒå¤šç§éŸ³è´¨çš„éŸ³ä¹æ–‡ä»¶ä¸‹è½½

### ğŸ§ éŸ³è´¨æ”¯æŒ
- `standard`ï¼šæ ‡å‡†éŸ³è´¨ (128kbps)
- `exhigh`ï¼šæé«˜éŸ³è´¨ (320kbps)
- `lossless`ï¼šæ— æŸéŸ³è´¨ (FLAC)
- `hires`ï¼šHi-ReséŸ³è´¨ (24bit/96kHz)
- `jyeffect`ï¼šé«˜æ¸…ç¯ç»•å£°
- `sky`ï¼šæ²‰æµ¸ç¯ç»•å£°
- `jymaster`ï¼šè¶…æ¸…æ¯å¸¦

### ğŸŒ ä½¿ç”¨æ–¹å¼
- **Webç•Œé¢**ï¼šç›´è§‚çš„ç½‘é¡µæ“ä½œç•Œé¢
- **APIæ¥å£**ï¼šå®Œæ•´çš„RESTful API
- **æ‰¹é‡å¤„ç†**ï¼šæ”¯æŒæ­Œå•å’Œä¸“è¾‘çš„æ‰¹é‡è§£æ

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚
- Python 3.7+
- ç½‘æ˜“äº‘éŸ³ä¹é»‘èƒ¶ä¼šå‘˜è´¦å·ï¼ˆç”¨äºè·å–é«˜éŸ³è´¨èµ„æºï¼‰

### å®‰è£…æ­¥éª¤

1. **å…‹éš†é¡¹ç›®**
   ```bash
   git clone https://github.com/Suxiaoqinx/Netease_url.git
   cd Netease_url
   ```

2. **å®‰è£…ä¾èµ–**
   ```bash
   pip install -r requirements.txt
   ```

3. **é…ç½®Cookie**
   
   åœ¨ `cookie.txt` æ–‡ä»¶ä¸­å¡«å…¥é»‘èƒ¶ä¼šå‘˜è´¦å·çš„Cookieï¼š
   
   > ğŸ’¡ **è·å–Cookieæ–¹æ³•**ï¼š
   > 1. ç™»å½•ç½‘æ˜“äº‘éŸ³ä¹ç½‘é¡µç‰ˆ
   > 2. æŒ‰F12æ‰“å¼€å¼€å‘è€…å·¥å…·
   > 3. åœ¨Networkæ ‡ç­¾é¡µæ‰¾åˆ°ä»»æ„è¯·æ±‚
   > 4. å¤åˆ¶è¯·æ±‚å¤´ä¸­çš„Cookieå€¼

4. **å¯åŠ¨æœåŠ¡**
   ```bash
   python main.py
   ```

5. **è®¿é—®ç•Œé¢**
   
   æ‰“å¼€æµè§ˆå™¨è®¿é—®ï¼š`http://localhost:5000`

## ğŸ¯ ä½¿ç”¨æŒ‡å—

### Webç•Œé¢ä½¿ç”¨

#### 1. æ­Œæ›²æœç´¢
1. é€‰æ‹©ã€Œæ­Œæ›²æœç´¢ã€åŠŸèƒ½
2. è¾“å…¥æœç´¢å…³é”®è¯
3. ç‚¹å‡»ã€Œæœç´¢ã€æŒ‰é’®
4. åœ¨æœç´¢ç»“æœä¸­ç‚¹å‡»ã€Œè§£æã€æˆ–ã€Œä¸‹è½½ã€æŒ‰é’®

#### 2. å•æ›²è§£æ
1. é€‰æ‹©ã€Œå•æ›²è§£æã€åŠŸèƒ½
2. è¾“å…¥æ­Œæ›²IDæˆ–ç½‘æ˜“äº‘éŸ³ä¹é“¾æ¥
3. é€‰æ‹©éŸ³è´¨ç­‰çº§
4. ç‚¹å‡»ã€Œè§£æã€æŒ‰é’®æŸ¥çœ‹æ­Œæ›²ä¿¡æ¯
5. ç‚¹å‡»ã€Œä¸‹è½½ã€æŒ‰é’®ä¸‹è½½éŸ³ä¹æ–‡ä»¶

#### 3. æ­Œå•è§£æ
1. é€‰æ‹©ã€Œæ­Œå•è§£æã€åŠŸèƒ½
2. è¾“å…¥æ­Œå•IDæˆ–æ­Œå•é“¾æ¥
3. ç‚¹å‡»ã€Œè§£ææ­Œå•ã€æŒ‰é’®
4. æŸ¥çœ‹æ­Œå•ä¿¡æ¯å’Œæ­Œæ›²åˆ—è¡¨
5. ç‚¹å‡»å•é¦–æ­Œæ›²çš„ã€Œè§£æã€æˆ–ã€Œä¸‹è½½ã€æŒ‰é’®

#### 4. ä¸“è¾‘è§£æ
1. é€‰æ‹©ã€Œä¸“è¾‘è§£æã€åŠŸèƒ½
2. è¾“å…¥ä¸“è¾‘IDæˆ–ä¸“è¾‘é“¾æ¥
3. ç‚¹å‡»ã€Œè§£æä¸“è¾‘ã€æŒ‰é’®
4. æŸ¥çœ‹ä¸“è¾‘ä¿¡æ¯å’Œæ­Œæ›²åˆ—è¡¨
5. ç‚¹å‡»å•é¦–æ­Œæ›²çš„ã€Œè§£æã€æˆ–ã€Œä¸‹è½½ã€æŒ‰é’®

#### 5. éŸ³ä¹ä¸‹è½½
1. é€‰æ‹©ã€ŒéŸ³ä¹ä¸‹è½½ã€åŠŸèƒ½
2. è¾“å…¥éŸ³ä¹IDæˆ–é“¾æ¥
3. é€‰æ‹©ä¸‹è½½éŸ³è´¨
4. ç‚¹å‡»ã€Œä¸‹è½½ã€æŒ‰é’®
5. ç­‰å¾…ä¸‹è½½å®Œæˆ

### é“¾æ¥æ ¼å¼æ”¯æŒ

é¡¹ç›®æ”¯æŒå¤šç§ç½‘æ˜“äº‘éŸ³ä¹é“¾æ¥æ ¼å¼ï¼š

- **æ­Œæ›²é“¾æ¥**ï¼š`https://music.163.com/song?id=123456`
- **æ­Œå•é“¾æ¥**ï¼š`https://music.163.com/playlist?id=123456`
- **ä¸“è¾‘é“¾æ¥**ï¼š`https://music.163.com/album?id=123456`
- **ç›´æ¥ID**ï¼š`123456`

## ğŸ”Œ APIæ¥å£æ–‡æ¡£

### åŸºç¡€ä¿¡æ¯
- **æœåŠ¡åœ°å€**ï¼š`http://localhost:5000`
- **è¯·æ±‚æ–¹å¼**ï¼šPOSTï¼ˆéƒ¨åˆ†æ¥å£æ”¯æŒGETï¼‰
- **å“åº”æ ¼å¼**ï¼šJSON

### æ¥å£åˆ—è¡¨

#### 1. å¥åº·æ£€æŸ¥
```http
GET /health
```

**å“åº”ç¤ºä¾‹**ï¼š
```json
{
  "status": 200,
  "success": true,
  "message": "æœåŠ¡è¿è¡Œæ­£å¸¸",
  "data": {
    "service": "ç½‘æ˜“äº‘éŸ³ä¹API",
    "version": "1.0.0",
    "uptime": "2å°æ—¶3åˆ†é’Ÿ"
  }
}
```

#### 2. æ­Œæ›²æœç´¢
```http
POST /search
```

**è¯·æ±‚å‚æ•°**ï¼š
```json
{
  "keyword": "æœç´¢å…³é”®è¯",
  "limit": 30
}
```

**å“åº”ç¤ºä¾‹**ï¼š
```json
{
  "status": 200,
  "success": true,
  "message": "æœç´¢å®Œæˆ",
  "data": [
    {
      "id": "123456",
      "name": "æ­Œæ›²åç§°",
      "artists": "è‰ºæœ¯å®¶",
      "album": "ä¸“è¾‘åç§°",
      "picUrl": "å°é¢å›¾ç‰‡URL"
    }
  ]
}
```

#### 3. å•æ›²è§£æ
```http
POST /song
```

**è¯·æ±‚å‚æ•°**ï¼š
```json
{
  "url": "æ­Œæ›²IDæˆ–é“¾æ¥",
  "level": "lossless",
  "type": "json"
}
```

**å“åº”ç¤ºä¾‹**ï¼š
```json
{
  "status": 200,
  "success": true,
  "message": "è§£ææˆåŠŸ",
  "data": {
    "name": "æ­Œæ›²åç§°",
    "ar_name": "è‰ºæœ¯å®¶",
    "al_name": "ä¸“è¾‘åç§°",
    "level": "lossless",
    "size": "45.2MB",
    "url": "ä¸‹è½½é“¾æ¥",
    "pic": "å°é¢å›¾ç‰‡",
    "lyric": "æ­Œè¯å†…å®¹"
  }
}
```

#### 4. æ­Œå•è§£æ
```http
POST /playlist
```

**è¯·æ±‚å‚æ•°**ï¼š
```json
{
  "id": "æ­Œå•ID"
}
```

**å“åº”ç¤ºä¾‹**ï¼š
```json
{
  "status": 200,
  "success": true,
  "message": "æ­Œå•è§£ææˆåŠŸ",
  "data": {
    "playlist": {
      "name": "æ­Œå•åç§°",
      "creator": "åˆ›å»ºè€…",
      "description": "æ­Œå•æè¿°",
      "coverImgUrl": "å°é¢å›¾ç‰‡",
      "trackCount": 50,
      "tracks": [
        {
          "id": "123456",
          "name": "æ­Œæ›²åç§°",
          "artists": "è‰ºæœ¯å®¶",
          "album": "ä¸“è¾‘åç§°",
          "picUrl": "å°é¢å›¾ç‰‡"
        }
      ]
    }
  }
}
```

#### 5. ä¸“è¾‘è§£æ
```http
POST /album
```

**è¯·æ±‚å‚æ•°**ï¼š
```json
{
  "id": "ä¸“è¾‘ID"
}
```

**å“åº”ç¤ºä¾‹**ï¼š
```json
{
  "status": 200,
  "success": true,
  "message": "ä¸“è¾‘è§£ææˆåŠŸ",
  "data": {
    "album": {
      "name": "ä¸“è¾‘åç§°",
      "artist": "è‰ºæœ¯å®¶",
      "description": "ä¸“è¾‘æè¿°",
      "coverImgUrl": "å°é¢å›¾ç‰‡",
      "songs": [
        {
          "id": "123456",
          "name": "æ­Œæ›²åç§°",
          "artists": "è‰ºæœ¯å®¶",
          "album": "ä¸“è¾‘åç§°",
          "picUrl": "å°é¢å›¾ç‰‡"
        }
      ]
    }
  }
}
```

#### 6. éŸ³ä¹ä¸‹è½½
```http
POST /download
```

**è¯·æ±‚å‚æ•°**ï¼š
```json
{
  "id": "éŸ³ä¹ID",
  "quality": "lossless"
}
```

**å“åº”**ï¼šè¿”å›éŸ³é¢‘æ–‡ä»¶æµï¼Œæ”¯æŒç›´æ¥ä¸‹è½½

## ğŸ³ Dockeréƒ¨ç½²

### ä½¿ç”¨Docker Compose

1. **åˆ›å»ºæ–‡ä»¶**
   
 åˆ›å»º `docker-compose.yml` æ–‡ä»¶ï¼š
 ```yaml
 version: '3.8'

services:
  netease-url:
    # ä½¿ç”¨æŒ‡å®šé•œåƒ
    image: dxggofficial/netease_url:latest
    
    # ç«¯å£æ˜ å°„ï¼ˆæ ¹æ®å®¹å™¨å†…æš´éœ²çš„ç«¯å£è°ƒæ•´ï¼Œç¤ºä¾‹ä¸º 5000ï¼‰
    ports:
      - "5000:5000"
    
    # æŒ‚è½½é…ç½®ï¼ˆå•ç‹¬æŒ‚è½½æ ¹ç›®å½•çš„ cookie.txtï¼‰
    volumes:
      - ./cookie.txt:/app/cookie.txt
    
    # ç¯å¢ƒå˜é‡ï¼ˆæ ¹æ®é•œåƒéœ€æ±‚æ·»åŠ ï¼Œç¤ºä¾‹ï¼‰
    environment:
      - TZ=Asia/Shanghai
      - LOG_LEVEL=info
    
    # é‡å¯ç­–ç•¥ï¼ˆå¯é€‰ï¼‰
    restart: unless-stopped
   ```
   ç„¶ååˆ›å»ºä¿®æ”¹ cookie.txt æ–‡æœ¬æ–‡ä»¶

### Cookieé…ç½®

åœ¨ `cookie.txt` æ–‡ä»¶ä¸­é…ç½®ç½‘æ˜“äº‘éŸ³ä¹Cookieï¼š

```
MUSIC_U=ä½ çš„MUSIC_Uå€¼;os=pc;appver=8.9.70;
```

> âš ï¸ **é‡è¦æç¤º**ï¼š
> - å¿…é¡»ä½¿ç”¨é»‘èƒ¶ä¼šå‘˜è´¦å·çš„Cookie
> - Cookieæ ¼å¼å¿…é¡»ä¸¥æ ¼æŒ‰ç…§ç¤ºä¾‹å¡«å†™
> - å®šæœŸæ›´æ–°Cookieä»¥ä¿æŒæœ‰æ•ˆæ€§

2. **å¯åŠ¨æœåŠ¡**
   ```bash
   docker-compose up -d
   ```

3. **æŸ¥çœ‹æ—¥å¿—**
   ```bash
   docker-compose logs -f
   ```

4. **åœæ­¢æœåŠ¡**
   ```bash
   docker-compose down
   ```

### æˆ–ç›´æ¥ä½¿ç”¨Docker run

```bash
# Windows ç³»ç»Ÿ
docker run -d --name netease-url -p 5000:5000 -v C:/Users/dxggo/Desktop/test/cookie.txt:/app/cookie.txt dxggofficial/netease_url:latest

# Linux/Mac ç³»ç»Ÿ
docker run -d --name netease-url -p 5000:5000 -v $(pwd)/cookie.txt:/app/cookie.txt dxggofficial/netease_url:latest
```

## âš™ï¸ é…ç½®è¯´æ˜

### ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ `.env` æ–‡ä»¶æˆ–ç¯å¢ƒå˜é‡é…ç½®æœåŠ¡ï¼š

```bash
# æœåŠ¡é…ç½®
HOST=0.0.0.0
PORT=5000
DEBUG=false

# ä¸‹è½½é…ç½®
DOWNLOADS_DIR=downloads
MAX_FILE_SIZE=524288000  # 500MB

# æ—¥å¿—é…ç½®
LOG_LEVEL=INFO
```

## ğŸ”§ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

#### 1. Cookieæ— æ•ˆ
**é—®é¢˜**ï¼šæç¤ºCookieæ— æ•ˆæˆ–è¿‡æœŸ

**è§£å†³æ–¹æ¡ˆ**ï¼š
- ç¡®è®¤ä½¿ç”¨çš„æ˜¯é»‘èƒ¶ä¼šå‘˜è´¦å·
- é‡æ–°è·å–Cookieå¹¶æ›´æ–° `cookie.txt`
- æ£€æŸ¥Cookieæ ¼å¼æ˜¯å¦æ­£ç¡®

#### 2. æ— æ³•ä¸‹è½½é«˜éŸ³è´¨
**é—®é¢˜**ï¼šåªèƒ½ä¸‹è½½æ ‡å‡†éŸ³è´¨

**è§£å†³æ–¹æ¡ˆ**ï¼š
- ç¡®è®¤è´¦å·æ˜¯é»‘èƒ¶ä¼šå‘˜
- æ£€æŸ¥Cookieæ˜¯å¦æœ‰æ•ˆ
- ç¡®è®¤æ­Œæ›²æœ¬èº«æ”¯æŒé«˜éŸ³è´¨

#### 3. æœåŠ¡å¯åŠ¨å¤±è´¥
**é—®é¢˜**ï¼šè¿è¡Œ `python main.py` æŠ¥é”™

**è§£å†³æ–¹æ¡ˆ**ï¼š
- æ£€æŸ¥Pythonç‰ˆæœ¬ï¼ˆéœ€è¦3.7+ï¼‰
- å®‰è£…æ‰€æœ‰ä¾èµ–ï¼š`pip install -r requirements.txt`
- æ£€æŸ¥ç«¯å£5000æ˜¯å¦è¢«å ç”¨

#### 4. ä¸‹è½½æ–‡ä»¶æŸå
**é—®é¢˜**ï¼šä¸‹è½½çš„éŸ³é¢‘æ–‡ä»¶æ— æ³•æ’­æ”¾

**è§£å†³æ–¹æ¡ˆ**ï¼š
- æ£€æŸ¥ç½‘ç»œè¿æ¥æ˜¯å¦ç¨³å®š
- é‡æ–°ä¸‹è½½æ–‡ä»¶
- å°è¯•å…¶ä»–éŸ³è´¨é€‰é¡¹

### æ—¥å¿—æŸ¥çœ‹

æœåŠ¡è¿è¡Œæ—¶ä¼šç”Ÿæˆæ—¥å¿—æ–‡ä»¶ `music_api.log`ï¼Œå¯ä»¥æŸ¥çœ‹è¯¦ç»†çš„é”™è¯¯ä¿¡æ¯ï¼š

```bash
tail -f music_api.log
```

## ğŸ“ å¼€å‘è¯´æ˜

### é¡¹ç›®ç»“æ„

```
Netease_url/
â”œâ”€â”€ main.py              # ä¸»ç¨‹åºå…¥å£
â”œâ”€â”€ music_api.py         # éŸ³ä¹APIæ ¸å¿ƒæ¨¡å—
â”œâ”€â”€ music_downloader.py  # éŸ³ä¹ä¸‹è½½æ¨¡å—
â”œâ”€â”€ cookie_manager.py    # Cookieç®¡ç†æ¨¡å—
â”œâ”€â”€ qr_login.py         # äºŒç»´ç ç™»å½•æ¨¡å—
â”œâ”€â”€ templates/
â”‚   â””â”€â”€ index.html      # Webç•Œé¢æ¨¡æ¿
â”œâ”€â”€ downloads/          # ä¸‹è½½æ–‡ä»¶ç›®å½•
â”œâ”€â”€ requirements.txt    # Pythonä¾èµ–
â”œâ”€â”€ Dockerfile         # Dockeræ„å»ºæ–‡ä»¶
â”œâ”€â”€ docker-compose.yml # Docker Composeé…ç½®
â””â”€â”€ README.md          # é¡¹ç›®è¯´æ˜
```

### æŠ€æœ¯æ ˆ

- **åç«¯**ï¼šFlask + Python
- **å‰ç«¯**ï¼šBootstrap + jQuery
- **éŸ³é¢‘å¤„ç†**ï¼šmutagen
- **HTTPå®¢æˆ·ç«¯**ï¼šaiohttp + requests
- **å®¹å™¨åŒ–**ï¼šDocker

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯å¼€æºï¼Œä½†**ç¦æ­¢ç”¨äºä»»ä½•å•†ä¸šæˆ–ä»˜è´¹é¡¹ç›®**ã€‚

## ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿æäº¤Issueå’ŒPull Requestï¼

1. Forkæœ¬é¡¹ç›®
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ï¼š`git checkout -b feature/new-feature`
3. æäº¤æ›´æ”¹ï¼š`git commit -am 'Add new feature'`
4. æ¨é€åˆ†æ”¯ï¼š`git push origin feature/new-feature`
5. æäº¤Pull Request

## ğŸ“ è”ç³»æ–¹å¼

- **GitHub Issues**ï¼š[æäº¤é—®é¢˜](https://github.com/Suxiaoqinx/Netease_url/issues)
- **ä½œè€…åšå®¢**ï¼š[https://www.toubiec.cn](https://www.toubiec.cn)

---

**â­ å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç»™ä¸ªStaræ”¯æŒä¸€ä¸‹ï¼**
